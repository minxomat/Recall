<!DOCTYPE HTML>
<!--
	Identity by HTML5 UP
	html5up.net | @n33co
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Recall Interpreter</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!--[if lte IE 8]><script src="assets/js/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="assets/css/main.css" />
		<!--[if lte IE 9]><link rel="stylesheet" href="assets/css/ie9.css" /><![endif]-->
		<!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-loading">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Main -->
					<section id="main">
						<header>
							<span class="avatar"><img src="images/avatar.jpg" alt="" /></span>
							<h1>Recall</h1>
							<p><a href="http://minxomat.eu/introducing-recall">Tutorial</a></p>
						</header>
						<hr />
				        <div class="field">
				        	<input type="text" id="srccd" placeholder="Sourcecode" onchange="updatePL();" onkeypress="this.onchange();" onpaste="this.onchange();" oninput="this.onchange();" />
				        </div>
                        <p></p>
				        <div class="field">
				        	<input type="text" id="input" placeholder="Input (optional)" onchange="updatePL();" onkeypress="this.onchange();" onpaste="this.onchange();" oninput="this.onchange();" />
				        </div>
                        <p></p>
				        <div class="field">
				        	<textarea id="output" placeholder="Output..." rows="10" readonly ></textarea>
				        </div>
                        <p></p>
				        <ul class="actions">
				        	<li><a class="button" onclick="startmanDOM()">Compile</a></li>
				        </ul>
                        <hr />
                        <div class="field">
                            <input type="text" id="permalink" readonly style="text-align: center" onClick="this.setSelectionRange(0, this.value.length)" />
                        </div>
						<hr />
						<footer>
							<p>
                                made with <b>&hearts;</b> by <a href="http://minxomat.eu/">minxomat</a> using emscripten, node.js, UglifyJS and asm.js
                            </p>
                        </footer>
					</section>
			</div>

		<!-- Scripts -->
            <script type='text/javascript'>
                var stdInput, Module, sPermalink;
                
                function getURLParameter(name) {
                    return decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(location.search)||[,""])[1].replace(/\+/g, '%20'))||null
                }
                
                var sTemp = getURLParameter('code');
                if (sTemp !== null) document.getElementById('srccd').value = sTemp;
                sTemp = getURLParameter('input');
                if (sTemp !== null) document.getElementById('input').value = sTemp;
                updatePL();
                
                function updatePL() {                        
                    sPermalink = 'http://minxomat.github.io/Recall/index.html' + 
                                 '?code='  + encodeURIComponent(document.getElementById('srccd').value);
                    if (read('input') !== null)
                        sPermalink += '&input=' + encodeURIComponent(document.getElementById('input').value);
                    
                    document.getElementById('permalink').value = sPermalink;
                }
                
                function read(el) {
                    return document.getElementById(el).value||null;
                }
                
                function startmanDOM() {
                    stdInput = document.getElementById('input').value;
                    Module = {
                        arguments: [document.getElementById('srccd').value],
                        print: (function() {
                            var element = document.getElementById('output');
                            return function(text) { 
                                if (element) {
                                    if (element.value == 'Executing...') element.value = '';
                                    element.value += text + "\n"; 
                                }
                            };
                        })()
                    };
                    document.getElementById('output').value = 'Executing...';
                    var inject = document.createElement('script');
                    inject.setAttribute('type', 'text/javascript');
                    inject.setAttribute('src', 'recall.min.js');
                    document.head.appendChild(inject);
                }
            </script>
			<!--[if lte IE 8]><script src="assets/js/respond.min.js"></script><![endif]-->
			<script>
				if ('addEventListener' in window) {
					window.addEventListener('load', function() { document.body.className = document.body.className.replace(/\bis-loading\b/, ''); });
					document.body.className += (navigator.userAgent.match(/(MSIE|rv:11\.0)/) ? ' is-ie' : '');
				}
			</script>

	</body>
</html>